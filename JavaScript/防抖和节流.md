é˜²æŠ–å’ŒèŠ‚æµï¼Œæˆ‘çœŸçš„æ˜¯æ™•äº†å¥½ä¹…äº†å‘€ã€‚ä¸€å®šè¦å½»åº•å¼„æ˜ç™½äº†ã€‚ğŸ’ª

### é˜²æŠ–

> é˜²æŠ–æ˜¯åœ¨è§¦å‘äº‹ä»¶çš„nç§’ä¹‹åæ‰ä¼šæ‰§è¡Œå‡½æ•°ï¼Œå¦‚æœé¢‘ç¹çš„è§¦å‘æŸä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆå‰é¢è®¡æ—¶éƒ½ä¼šæ¸…ç©º(clearTimeout), å°†äº‹ä»¶å†…çš„è¿ç»­åŠ¨ä½œåˆ æ‰ï¼Œä»¥æœ€æ–°çš„nè¿›è¡Œè®¡ç®—ã€‚

> ä»»åŠ¡é¢‘ç¹è§¦å‘çš„æƒ…å†µä¸‹ï¼Œåªæœ‰ä»»åŠ¡è§¦å‘çš„é—´éš”è¶…è¿‡æŒ‡å®šé—´éš”çš„æ—¶å€™ï¼Œä»»åŠ¡æ‰ä¼šæ‰§è¡Œ

> é«˜é¢‘è§¦å‘çš„äº‹ä»¶ï¼Œåœ¨æŒ‡å®šçš„å•ä½æ—¶é—´å†…ï¼Œåªå“åº”æœ€åä¸€æ¬¡ï¼Œå¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†æ¬¡è§¦å‘ï¼Œåˆ™é‡æ–°è®¡ç®—æ—¶é—´.

#### åº”ç”¨åœºæ™¯

- æŒ‰é’®ç‚¹å‡»äº‹ä»¶
- inputäº‹ä»¶
- æ‰‹æœºå·éªŒè¯
- é˜²æ­¢ç”¨æˆ·å¤šæ¬¡é‡å¤æäº¤

```javascript
function debounce(fn, wait) {
   let timer = null; // æ”¾åˆ°å¤–é¢, ä¸ç„¶å»¶æ—¶åˆ°äº†è¿˜æ˜¯ä¼šæ‰§è¡Œå¾ˆå¤šé 
   return function() {
     clearTimeout(timer);  //  æ¯å½“ç”¨æˆ·è¾“å…¥çš„æ—¶å€™æŠŠå‰ä¸€ä¸ª setTimeout clear æ‰
     timer = setTimeout(() => fn.apply(this, arguments), wait);
  }
}
```
æ³¨æ„çš„ç‚¹ï¼š

1. `apply`, `call`, `bind`çš„åŒºåˆ«
2. `setTimeout`çš„`this`

#### `apply`å’Œ`call`

- åœ¨é˜²æŠ–å‡½æ•°ä¸­ä½¿ç”¨`apply`å’Œ`call`æ˜¯ä¸ºäº†æ”¹å˜`this`çš„æŒ‡å‘ï¼Œå› ä¸ºåœ¨fnè°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚æœfnå‡½æ•°æœ‰ä½¿ç”¨thiså¯¹è±¡ï¼Œé‚£ä¹ˆ`this`æ˜¯æŒ‡å‘`window`çš„, ä¸æ˜¯æŒ‡å‘è°ƒç”¨fnçš„å‡½æ•°çš„å¯¹è±¡ã€‚(æ¯”å¦‚inputæ¡†)

#### å…³äº`setTimeout`çš„`this`

**ç®­å¤´å‡½æ•°ï¼š**
```
  setTimeout(() => fn.apply(this, arguments)});
  // thisæ˜¯æŒ‡å‘inputå¯¹è±¡
```
**æ™®é€šå‡½æ•°ï¼š**
```
setTimeout(function() { fn.apply(this, arguments) });
// thisæŒ‡å‘çš„æ˜¯windowå¯¹è±¡
```
è§£å†³åŠæ³•
```
const self = this;
setTimeout(function() { fn.apply(self, arguments) });
// thisæŒ‡å‘çš„inputå¯¹è±¡
```


### èŠ‚æµ

>  æŒ‡å®šæ—¶é—´é—´éš”å†…åªä¼šæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡,è€Œè¿™ä¸ªæ—¶é—´çš„è®¡ç®—ï¼Œæ˜¯ä»ä¸Šæ¬¡æ‰§è¡Œæ–¹æ³•å¼€å§‹ç®—èµ·

> ä¸€èˆ¬è¡¨ç°ä¸ºï¼Œåœ¨ä¸€æ®µè¿ç»­è§¦å‘çš„äº‹ä»¶ä¸­ï¼Œæ ¹æ®ä½ è®¾å®šçš„æ—¶é—´é—´éš”ï¼Œé™ä½è§¦å‘é¢‘ç‡ï¼Œé‡å¤æ‰§è¡Œ.

æ€è·¯ï¼šæ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶éƒ½åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰ç­‰å¾…æ‰§è¡Œçš„å»¶æ—¶å‡½æ•°ã€‚æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è®¾ç½®å®šæ—¶å™¨ï¼Œ ä¸€ç§æ˜¯æ—¶é—´æˆ³

åº”ç”¨åœºæ™¯ï¼š
1. é«˜é¢‘ç‚¹å‡»ï¼Œè¡¨å•æäº¤
2. æ»šåŠ¨åŠ è½½

```javascript
// å®šæ—¶å™¨
function throttle(fn, delay) {
   let canRun = true;   // ä¿å­˜ä¸€ä¸ªæ ‡è®°
   return function() {
      if (!canRun) {
        return;
      }
      canRun = false; // ç«‹å³è®¾ç½®ä¸ºfalse
      setTimeout(() => {
         fn.apply(this, arguments);
         //  æœ€ååœ¨setTimeoutæ‰§è¡Œå®Œæ¯•åå†æŠŠæ ‡è®°è®¾ç½®ä¸ºtrue(å…³é”®)è¡¨ç¤ºå¯ä»¥æ‰§è¡Œä¸‹ä¸€æ¬¡å¾ªç¯äº†
         //  å½“å®šæ—¶å™¨æ²¡æœ‰æ‰§è¡Œçš„æ—¶å€™æ ‡è®°æ°¸è¿œæ˜¯falseï¼Œåœ¨å¼€å¤´è¢«returnæ‰
         canRun = true;
      }, delay);
   } 
}

-----------------------

// æ—¶é—´æˆ³

function throttle(fn, delay) {
   let previous = 0;
   return function() {
      const now = +new Date();   //  è·å–å½“å‰æ—¶é—´
      if (now - previous > delay) {
         fn.apply(this, arguments);
         previous = now;
      }
   }
}
```

### æ€»ç»“

å‡½æ•°çš„é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«ï¼š
- å¦‚ä½•è®¡ç®—æ—¶é—´é—´éš”

![image](https://user-images.githubusercontent.com/25894364/91190314-082a8800-e726-11ea-831c-ea0b10ee8e5d.png)






å‚è€ƒï¼š
[å‡½æ•°é˜²æŠ–å’Œå‡½æ•°èŠ‚æµ1](https://zhuanlan.zhihu.com/p/38313717)
[å‡½æ•°é˜²æŠ–å’Œå‡½æ•°èŠ‚æµ2](https://juejin.im/entry/6844903466427482120)
[å‡½æ•°é˜²æŠ–å’Œå‡½æ•°èŠ‚æµ3](https://github.com/pekonchan/Blog/issues/14)
[ä»€ä¹ˆæ˜¯é˜²æŠ–?ä»€ä¹ˆæ˜¯èŠ‚æµ?æœ‰ä»€ä¹ˆåŒºåˆ«?å¦‚ä½•å®ç°?](https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/5)
[è·Ÿç€underscoreå­¦é˜²æŠ–](https://github.com/mqyqingfeng/Blog/issues/22)
[è·Ÿç€underscoreå­¦èŠ‚æµ](https://github.com/mqyqingfeng/Blog/issues/26)